{"version":3,"sources":["Constants.js","http/helpers.js","http/api.js","components/esito/Esito.js","App.js","WidgetElement.js"],"names":["K","serviceUrl","richiesta","esito","durata","importo","tasso","getDefaultOptions","headers","Headers","request","url","options","a","haveBodyResponse","fetch","response","status","json","Promise","reject","get","method","put","body","JSON","stringify","apiGetRichiesta","id","apiAccettaProposta","apiRifiutaProposta","Esito","useState","setRichiesta","proposta","setProposta","showModal","setShowModal","console","log","query","URLSearchParams","window","location","search","useEffect","then","catch","e","getRichiesta","className","Row","Col","md","icon","faCheckCircle","size","onClick","faCircleXmark","color","Modal","show","onHide","Header","closeButton","Title","Body","Footer","Button","variant","toFixed","replace","tassoVariabile","App","ATTRIBUTES","WidgetElement","this","getAttribute","initServiceUrl","mountPoint","document","createElement","appendChild","ReactDOM","render","Object","values","HTMLElement","customElements","define"],"mappings":"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","file":"static/js/main.12e1a749.chunk.js","sourcesContent":["\nexport const K = {\n\n  serviceUrl : null,\n\n    richiesta : {\n\n    esito: true,\n      durata: \"5 mesi\",\n      importo: 100000,\n      tasso: 777,\n    }\n};\n\nexport const initServiceUrl = (serviceUrl) => K.serviceUrl = serviceUrl;\n\n\n","export const getDefaultOptions = () => ({\n    headers: new Headers({\n        'Content-Type': 'application/json'\n    }),\n});\n\n\nexport const useQuery = () => {\n  return new URLSearchParams(window.location.search);\n};\n\nexport const request = async (url, options, haveBodyResponse = true) => {\n    const response = await fetch(url, options);\n    if (response.status === 204) {\n        return {};\n    }\n    if (response.status >= 200 && response.status < 300) {\n        if (haveBodyResponse) {\n            return response.json();\n        }\n        return {};\n    }\n\n    return Promise.reject(response.status);\n};\n\n","import {getDefaultOptions, request} from \"./helpers\";\r\n\r\n\r\nconst get = (url) => {\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nconst post = (url, body) => {\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: JSON.stringify(body)\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nconst put = (url, body) => {\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: JSON.stringify(body)\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n\r\nexport const apiGetRichiesta = async (serviceUrl, id) => {\r\n  return get(`${serviceUrl}/api/richiesta?id=${id}`);\r\n};\r\n\r\n\r\nexport const apiAccettaProposta = async (serviceUrl, id) => {\r\n  return put(`${serviceUrl}/api/richiesta/accetta?id=${id}`)\r\n}\r\n\r\nexport const apiRifiutaProposta = async (serviceUrl, id) => {\r\n  return put(`${serviceUrl}/api/richiesta/rifiuta?id=${id}`)\r\n}\r\n","import React, {useEffect, useState} from 'react';\nimport {K} from \"../../Constants\";\nimport {Button, Col, Row} from \"react-bootstrap\";\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\nimport Modal from 'react-bootstrap/Modal';\n\nimport {\n  faCheckCircle,\n  faCircleXmark,\n  faPlaneCircleXmark,\n  faXmarkCircle,\n  faXmarksLines, faXmarkSquare\n} from \"@fortawesome/free-solid-svg-icons\";\nimport {apiAccettaProposta, apiGetRichiesta, apiRifiutaProposta} from \"../../http/api\";\nimport {useQuery} from \"../../http/helpers\";\n\n\nexport const Esito = () => {\n  const [richiesta, setRichiesta] = useState({});\n  const [proposta, setProposta] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  console.log(showModal)\n\n\n  const getRichiesta = (query) => {\n    apiGetRichiesta(K.serviceUrl, query)\n      .then(json => {\n        setRichiesta(json)\n      })\n      .catch(e => console.log(\"err get richiesta\"));\n  };\n\n  const accetta = (id) => {\n    apiAccettaProposta(K.serviceUrl, id)\n      .then(json => {\n        console.log('ok')\n      })\n      .catch(e => console.log(\"err put\"));\n  };\n\n  const rifiuta = (id) => {\n    apiRifiutaProposta(K.serviceUrl, id)\n      .then(json => {\n        console.log('ok')\n      })\n      .catch(e => console.log(\"err put\"));\n  };\n\n  let query = useQuery().get('id');\n\n  useEffect(() => {\n    getRichiesta(query);\n  }, []);\n\n  function currencyFormatDE(num) {\n    return (\n      num\n        .toFixed(2) // always two decimal digits\n        .replace('.', ',') // replace decimal point character with ,\n        .replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1.') + ' €'\n    ) // use . as a separator\n  }\n\n  return (<>\n\n\n      {!richiesta ?\n        <span></span> :\n        <>\n          {proposta === false ?\n            <div className={'align-items-center back-col p-4'}>\n              <div className={\"white-div align-content-center\"}>\n                {richiesta.esito === true ?\n                  <>\n                    <Row>\n                      <Col md={12} className={'align-to-center'}>\n                        <FontAwesomeIcon icon={faCheckCircle} size={\"6x\"}\n                                         className={'green-check mb-4'}></FontAwesomeIcon>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col md={12} className={'align-to-center'}>\n                        <p className={\"title align-content-center\"}>La tua azienda è risultata finanziabile.</p>\n                      </Col>\n                    </Row>\n\n                    <Row>\n                      <Col md={12} className={'align-to-center'}>\n                        <p className={'subtitle'}>Per completare la pratica leggi ed accetta la nostra proposta\n                          commerciale </p>\n                      </Col>\n                    </Row>\n\n                    <Row>\n                      <Col md={12} className={'align-to-center'}>\n                        <button className=\"custom-button-richiesta\" onClick={() => setProposta(true)}> Vai alla proposta\n                        </button>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col md={12} className={'align-to-center'}>\n                        <button className=\"custom-button-richiesta\"> Ritorna alla home page</button>\n                      </Col>\n                    </Row>\n                  </> :\n                  <>\n                    <Row>\n                      <Col md={12} className={'align-to-center'}>\n                        <FontAwesomeIcon icon={faCircleXmark} size={\"6x\"} color={'red'}\n                                         className={'mb-4'}></FontAwesomeIcon>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col md={12} className={'align-to-center'}>\n                        <p className={\"title align-to-center\"}>Siamo spiacenti, al momento non\n                          possiamo soddisfare la sua richiesta di finanziamento\n                        </p>\n                      </Col>\n                    </Row>\n\n                    <Row>\n                      <Col md={12} className={'align-to-center'}>\n                        <button className=\"custom-button-richiesta\"> Ritorna alla home page</button>\n                      </Col>\n                    </Row>\n                  </>\n                }\n\n              </div>\n\n            </div>\n            :\n            <div className={'align-items-center back-col p-4'}>\n              <div className={\"white-div align-content-center\"}>\n\n\n                <Modal show={showModal} onHide={() => setShowModal(false)} >\n                  <Modal.Header closeButton>\n                    <Modal.Title >Non Accettare</Modal.Title>\n                  </Modal.Header>\n\n                  <Modal.Body>\n                    <p>Sei sicuro di non volere accettare la nostra proposta?\n                    </p>\n                  </Modal.Body>\n\n                  <Modal.Footer>\n                    <Button variant=\"secondary\" onClick={() => setShowModal(false)}>No</Button>\n                    <Button variant=\"primary\" onClick={() => {\n                      rifiuta(richiesta.id);\n                      setShowModal(false);\n                    }}>Si</Button>\n                  </Modal.Footer>\n\n                </Modal>\n\n\n                <Row>\n                  <Col md={12} className={'align-to-center'}>\n                    <p className={\"title align-content-center\"}>La Prefattibilità della tua richiesta ha dato esito\n                      positivo</p>\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col md={12} className={'align-to-center'}>\n                    <p className={'subtitle'}>Possiamo avviare il nostro processo di delibera per la seguente\n                      operazione </p>\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col md={12} className={'align-to-center'}>\n                    <span className={'subtitle-proposta'}>Importo: </span> <span\n                    className={'subtitle'}>{richiesta.importo ? currencyFormatDE(richiesta.importo) : ''}</span>\n                  </Col>\n                </Row>\n                <Row>\n                  <Col md={12} className={'align-to-center'}>\n                    <span className={'subtitle-proposta'}>Durata: </span> <span\n                    className={'subtitle'}>{richiesta.durata}</span>\n                  </Col>\n                </Row>\n                <Row>\n                  <Col md={12} className={'align-to-center'}>\n                    <span className={'subtitle-proposta'}>Tasso variabile: </span> <span className={'subtitle'}> euribor mese + spread {richiesta.tassoVariabile}%</span>\n                  </Col>\n                </Row>\n                <Row>\n                  <Col md={12} className={'align-to-center'}>\n                    <span className={'subtitle-proposta'}>Spese Istruttoria: </span> <span className={'subtitle'}>2% del finanziamento</span>\n                  </Col>\n                </Row>\n\n                <Row>\n                  <Col md={12} className={'align-to-center'}>\n                    <button className=\"custom-button-richiesta mx-2\" onClick={() => setShowModal(true)}>Non accettare\n                    </button>\n                    <button className=\"custom-button-richiesta mx-2\" onClick={() => accetta(richiesta.id)}>Accetta\n                    </button>\n                  </Col>\n                </Row>\n\n\n              </div>\n            </div>\n          }\n        </>\n      }\n\n\n    </>\n  );\n}\n\n\n","import './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {Esito} from \"./components/esito/Esito\";\nimport React, { Component }  from 'react';\n\nfunction App() {\n\n  // const { keycloak, initialized } = useKeycloak()\n  // if (keycloak.authenticated) {\n  //   initApplicationConstants();\n  //   checkNewUser();\n  // }\n\n  return (\n   <Esito/>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport {initServiceUrl} from \"./Constants\";\n\n\nconst ATTRIBUTES = {\n  serviceUrl: 'service-url',\n};\n\nclass WidgetElement extends HTMLElement {\n\n  static get observedAttributes() {\n    return Object.values(ATTRIBUTES);\n  }\n\n  connectedCallback() {\n    const serviceUrl = this.getAttribute(\"service-url\")\n    initServiceUrl(serviceUrl);\n\n    this.mountPoint = document.createElement('div');\n    this.appendChild(this.mountPoint);\n\n    ReactDOM.render(<App serviceUrl={serviceUrl}/>, this.mountPoint);\n  }\n}\n\n\ncustomElements.define('details-widget', WidgetElement);\n\nexport default WidgetElement;\n\n"],"sourceRoot":""}