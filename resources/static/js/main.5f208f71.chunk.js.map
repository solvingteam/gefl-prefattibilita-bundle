{"version":3,"sources":["Constants.js","http/helpers.js","http/api.js","components/esito/Esito.js","App.js","WidgetElement.js"],"names":["K","serviceUrl","richiesta","esito","durata","importo","tasso","getDefaultOptions","headers","Headers","request","url","options","a","haveBodyResponse","fetch","response","status","json","Promise","reject","get","method","put","body","JSON","stringify","apiGetRichiesta","id","apiAccettaProposta","apiRifiutaProposta","Esito","useState","setRichiesta","proposta","setProposta","showModal","setShowModal","console","log","query","URLSearchParams","window","location","search","useEffect","then","catch","e","getRichiesta","className","Row","Col","md","icon","faCheckCircle","size","onClick","faCircleXmark","color","Modal","show","onHide","Header","closeButton","Title","Body","Footer","Button","variant","toFixed","replace","tassoVariabile","App","ATTRIBUTES","WidgetElement","this","getAttribute","initServiceUrl","mountPoint","document","createElement","appendChild","ReactDOM","render","Object","values","HTMLElement","customElements","define"],"mappings":"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","file":"static/js/main.5f208f71.chunk.js","sourcesContent":["\r\nexport const K = {\r\n\r\n  serviceUrl : null,\r\n\r\n    richiesta : {\r\n\r\n    esito: true,\r\n      durata: \"5 mesi\",\r\n      importo: 100000,\r\n      tasso: 777,\r\n    }\r\n};\r\n\r\nexport const initServiceUrl = (serviceUrl) => K.serviceUrl = serviceUrl;\r\n\r\n\r\n","export const getDefaultOptions = () => ({\r\n    headers: new Headers({\r\n        'Content-Type': 'application/json'\r\n    }),\r\n});\r\n\r\n\r\nexport const useQuery = () => {\r\n  return new URLSearchParams(window.location.search);\r\n};\r\n\r\nexport const request = async (url, options, haveBodyResponse = true) => {\r\n    const response = await fetch(url, options);\r\n    if (response.status === 204) {\r\n        return {};\r\n    }\r\n    if (response.status >= 200 && response.status < 300) {\r\n        if (haveBodyResponse) {\r\n            return response.json();\r\n        }\r\n        return {};\r\n    }\r\n\r\n    return Promise.reject(response.status);\r\n};\r\n\r\n","import {getDefaultOptions, request} from \"./helpers\";\r\n\r\n\r\nconst get = (url) => {\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'GET'\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nconst post = (url, body) => {\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'POST',\r\n    body: JSON.stringify(body)\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\nconst put = (url, body) => {\r\n  const options = {\r\n    ...getDefaultOptions(),\r\n    method: 'PUT',\r\n    body: JSON.stringify(body)\r\n  };\r\n  return request(url, options);\r\n};\r\n\r\n\r\nexport const apiGetRichiesta = async (serviceUrl, id) => {\r\n  return get(`${serviceUrl}/api/richiesta?id=${id}`);\r\n};\r\n\r\n\r\nexport const apiAccettaProposta = async (serviceUrl, id) => {\r\n  return put(`${serviceUrl}/api/richiesta/accetta?id=${id}`)\r\n}\r\n\r\nexport const apiRifiutaProposta = async (serviceUrl, id) => {\r\n  return put(`${serviceUrl}/api/richiesta/rifiuta?id=${id}`)\r\n}\r\n","import React, {useEffect, useState} from 'react';\r\nimport {K} from \"../../Constants\";\r\nimport {Button, Col, Row} from \"react-bootstrap\";\r\nimport {FontAwesomeIcon} from '@fortawesome/react-fontawesome'\r\nimport Modal from 'react-bootstrap/Modal';\r\n\r\nimport {\r\n  faCheckCircle,\r\n  faCircleXmark,\r\n  faPlaneCircleXmark,\r\n  faXmarkCircle,\r\n  faXmarksLines, faXmarkSquare\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {apiAccettaProposta, apiGetRichiesta, apiRifiutaProposta} from \"../../http/api\";\r\nimport {useQuery} from \"../../http/helpers\";\r\n\r\n\r\nexport const Esito = () => {\r\n  const [richiesta, setRichiesta] = useState({});\r\n  const [proposta, setProposta] = useState(false);\r\n  const [showModal, setShowModal] = useState(false);\r\n  console.log(showModal)\r\n\r\n\r\n  const getRichiesta = (query) => {\r\n    apiGetRichiesta(K.serviceUrl, query)\r\n      .then(json => {\r\n        setRichiesta(json)\r\n      })\r\n      .catch(e => console.log(\"err get richiesta\"));\r\n  };\r\n\r\n  const accetta = (id) => {\r\n    apiAccettaProposta(K.serviceUrl, id)\r\n      .then(json => {\r\n        console.log('ok')\r\n      })\r\n      .catch(e => console.log(\"err put\"));\r\n  };\r\n\r\n  const rifiuta = (id) => {\r\n    apiRifiutaProposta(K.serviceUrl, id)\r\n      .then(json => {\r\n        console.log('ok')\r\n      })\r\n      .catch(e => console.log(\"err put\"));\r\n  };\r\n\r\n  let query = useQuery().get('id');\r\n\r\n  useEffect(() => {\r\n    getRichiesta(query);\r\n  }, []);\r\n\r\n  function currencyFormatDE(num) {\r\n    return (\r\n      num\r\n        .toFixed(2) // always two decimal digits\r\n        .replace('.', ',') // replace decimal point character with ,\r\n        .replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1.') + ' €'\r\n    ) // use . as a separator\r\n  }\r\n\r\n  return (<>\r\n\r\n\r\n      {!richiesta ?\r\n        <span></span> :\r\n        <>\r\n          {proposta === false ?\r\n            <div className={'align-items-center back-col p-4'}>\r\n              <div className={\"white-div align-content-center\"}>\r\n                {richiesta.esito === true ?\r\n                  <>\r\n                    <Row>\r\n                      <Col md={12} className={'align-to-center'}>\r\n                        <FontAwesomeIcon icon={faCheckCircle} size={\"6x\"}\r\n                                         className={'green-check mb-4'}></FontAwesomeIcon>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col md={12} className={'align-to-center'}>\r\n                        <p className={\"title align-content-center\"}>La tua azienda è risultata finanziabile.</p>\r\n                      </Col>\r\n                    </Row>\r\n\r\n                    <Row>\r\n                      <Col md={12} className={'align-to-center'}>\r\n                        <p className={'subtitle'}>Per completare la pratica leggi ed accetta la nostra proposta\r\n                          commerciale </p>\r\n                      </Col>\r\n                    </Row>\r\n\r\n                    <Row>\r\n                      <Col md={12} className={'align-to-center'}>\r\n                        <button className=\"custom-button-richiesta\" onClick={() => setProposta(true)}> Vai alla proposta\r\n                        </button>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col md={12} className={'align-to-center'}>\r\n                        <button className=\"custom-button-richiesta\"> Ritorna alla home page</button>\r\n                      </Col>\r\n                    </Row>\r\n                  </> :\r\n                  <>\r\n                    <Row>\r\n                      <Col md={12} className={'align-to-center'}>\r\n                        <FontAwesomeIcon icon={faCircleXmark} size={\"6x\"} color={'red'}\r\n                                         className={'mb-4'}></FontAwesomeIcon>\r\n                      </Col>\r\n                    </Row>\r\n                    <Row>\r\n                      <Col md={12} className={'align-to-center'}>\r\n                        <p className={\"title align-to-center\"}>Siamo spiacenti, al momento non\r\n                          possiamo soddisfare la sua richiesta di finanziamento\r\n                        </p>\r\n                      </Col>\r\n                    </Row>\r\n\r\n                    <Row>\r\n                      <Col md={12} className={'align-to-center'}>\r\n                        <button className=\"custom-button-richiesta\"> Ritorna alla home page</button>\r\n                      </Col>\r\n                    </Row>\r\n                  </>\r\n                }\r\n\r\n              </div>\r\n\r\n            </div>\r\n            :\r\n            <div className={'align-items-center back-col p-4'}>\r\n              <div className={\"white-div align-content-center\"}>\r\n\r\n\r\n                <Modal show={showModal} onHide={() => setShowModal(false)} >\r\n                  <Modal.Header closeButton>\r\n                    <Modal.Title >Non Accettare</Modal.Title>\r\n                  </Modal.Header>\r\n\r\n                  <Modal.Body>\r\n                    <p>Sei sicuro di non volere accettare la nostra proposta?\r\n                    </p>\r\n                  </Modal.Body>\r\n\r\n                  <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={() => setShowModal(false)}>No</Button>\r\n                    <Button variant=\"primary\" onClick={() => {\r\n                      rifiuta(richiesta.id);\r\n                      setShowModal(false);\r\n                    }}>Si</Button>\r\n                  </Modal.Footer>\r\n\r\n                </Modal>\r\n\r\n\r\n                <Row>\r\n                  <Col md={12} className={'align-to-center'}>\r\n                    <p className={\"title align-content-center\"}>La Prefattibilità della tua richiesta ha dato esito\r\n                      positivo</p>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col md={12} className={'align-to-center'}>\r\n                    <p className={'subtitle'}>Possiamo avviare il nostro processo di delibera per la seguente\r\n                      operazione </p>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col md={12} className={'align-to-center'}>\r\n                    <span className={'subtitle-proposta'}>Importo: </span> <span\r\n                    className={'subtitle'}>{richiesta.importo ? currencyFormatDE(richiesta.importo) : ''}</span>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col md={12} className={'align-to-center'}>\r\n                    <span className={'subtitle-proposta'}>Durata: </span> <span\r\n                    className={'subtitle'}>{richiesta.durata}</span>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col md={12} className={'align-to-center'}>\r\n                    <span className={'subtitle-proposta'}>Tasso variabile: </span> <span className={'subtitle'}> euribor mese + spread {richiesta.tassoVariabile}%</span>\r\n                  </Col>\r\n                </Row>\r\n                <Row>\r\n                  <Col md={12} className={'align-to-center'}>\r\n                    <span className={'subtitle-proposta'}>Spese Istruttoria: </span> <span className={'subtitle'}>2% del finanziamento</span>\r\n                  </Col>\r\n                </Row>\r\n\r\n                <Row>\r\n                  <Col md={12} className={'align-to-center'}>\r\n                    <button className=\"custom-button-richiesta mx-2\" onClick={() => setShowModal(true)}>Non accettare\r\n                    </button>\r\n                    <button className=\"custom-button-richiesta mx-2\" onClick={() => accetta(richiesta.id)}>Accetta\r\n                    </button>\r\n                  </Col>\r\n                </Row>\r\n\r\n\r\n              </div>\r\n            </div>\r\n          }\r\n        </>\r\n      }\r\n\r\n\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n","import './App.css';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport {Esito} from \"./components/esito/Esito\";\r\nimport React, { Component }  from 'react';\r\n\r\nfunction App() {\r\n\r\n  // const { keycloak, initialized } = useKeycloak()\r\n  // if (keycloak.authenticated) {\r\n  //   initApplicationConstants();\r\n  //   checkNewUser();\r\n  // }\r\n\r\n  return (\r\n   <Esito/>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './App';\r\nimport {initServiceUrl} from \"./Constants\";\r\n\r\n\r\nconst ATTRIBUTES = {\r\n  serviceUrl: 'service-url',\r\n};\r\n\r\nclass WidgetElement extends HTMLElement {\r\n\r\n  static get observedAttributes() {\r\n    return Object.values(ATTRIBUTES);\r\n  }\r\n\r\n  connectedCallback() {\r\n    const serviceUrl = this.getAttribute(\"service-url\")\r\n    initServiceUrl(serviceUrl);\r\n\r\n    this.mountPoint = document.createElement('div');\r\n    this.appendChild(this.mountPoint);\r\n\r\n    ReactDOM.render(<App serviceUrl={serviceUrl}/>, this.mountPoint);\r\n  }\r\n}\r\n\r\n\r\ncustomElements.define('details-widget', WidgetElement);\r\n\r\nexport default WidgetElement;\r\n\r\n"],"sourceRoot":""}