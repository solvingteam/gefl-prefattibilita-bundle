{"version":3,"sources":["Constants.js","http/helpers.js","http/api.js","components/esito/Esito.js","App.js","WidgetElement.js"],"names":["K","serviceUrl","richiesta","esito","durata","importo","tasso","getDefaultOptions","headers","Headers","request","url","options","a","haveBodyResponse","fetch","response","status","json","Promise","reject","get","method","put","body","JSON","stringify","apiGetRichiesta","id","apiAccettaProposta","apiRifiutaProposta","Esito","useState","setRichiesta","proposta","setProposta","card","setCard","showModal","setShowModal","console","log","num","query","URLSearchParams","window","location","search","useEffect","then","catch","e","getRichiesta","className","onClick","event","href","Row","Col","md","icon","faCheckCircle","size","faCircleXmark","color","Modal","show","onHide","Header","closeButton","Title","Body","Footer","Button","variant","toFixed","replace","tassoVariabile","guid","Spinner","animation","App","ATTRIBUTES","WidgetElement","this","getAttribute","initServiceUrl","mountPoint","document","createElement","appendChild","ReactDOM","render","Object","values","HTMLElement","customElements","define"],"mappings":"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","file":"static/js/main.4f98d21c.chunk.js","sourcesContent":["export const K = {\n  serviceUrl: null,\n\n  richiesta: {\n    esito: true,\n    durata: '5 mesi',\n    importo: 100000,\n    tasso: 777,\n  },\n};\n\nexport const initServiceUrl = serviceUrl => (K.serviceUrl = serviceUrl);\n","export const getDefaultOptions = () => ({\n  headers: new Headers({\n    'Content-Type': 'application/json',\n  }),\n});\n\nexport const useQuery = () => {\n  return new URLSearchParams(window.location.search);\n};\n\nexport const request = async (url, options, haveBodyResponse = true) => {\n  const response = await fetch(url, options);\n  if (response.status === 204) {\n    return {};\n  }\n  if (response.status >= 200 && response.status < 300) {\n    if (haveBodyResponse) {\n      return response.json();\n    }\n    return {};\n  }\n\n  return Promise.reject(response.status);\n};\n","import { getDefaultOptions, request } from './helpers';\n\nconst get = url => {\n  const options = {\n    ...getDefaultOptions(),\n    method: 'GET',\n  };\n  return request(url, options);\n};\n\nconst post = (url, body) => {\n  const options = {\n    ...getDefaultOptions(),\n    method: 'POST',\n    body: JSON.stringify(body),\n  };\n  return request(url, options);\n};\n\nconst put = (url, body) => {\n  const options = {\n    ...getDefaultOptions(),\n    method: 'PUT',\n    body: JSON.stringify(body),\n  };\n  return request(url, options);\n};\n\nexport const apiGetRichiesta = async (serviceUrl, id) => {\n  return get(`${serviceUrl}/api/richiesta/esito?id=${id}`);\n};\n\nexport const apiAccettaProposta = async (serviceUrl, id) => {\n  return put(`${serviceUrl}/api/richiesta/accetta?id=${id}`);\n};\n\nexport const apiRifiutaProposta = async (serviceUrl, id) => {\n  return put(`${serviceUrl}/api/richiesta/rifiuta?id=${id}`);\n};\n","import React, { useEffect, useState } from 'react';\nimport { Button, Col, Row, Spinner, Toast, ToastBody, ToastContainer } from 'react-bootstrap';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport Modal from 'react-bootstrap/Modal';\n\nimport {\n  faCheckCircle,\n  faCircleXmark,\n  faPlaneCircleXmark,\n  faThumbsDown,\n  faXmarkCircle,\n  faXmarksLines,\n  faXmarkSquare,\n} from '@fortawesome/free-solid-svg-icons';\nimport { K } from '../../Constants';\nimport { apiAccettaProposta, apiGetRichiesta, apiRifiutaProposta } from '../../http/api';\nimport { useQuery } from '../../http/helpers';\n\nexport const Esito = () => {\n  const [richiesta, setRichiesta] = useState();\n  const [proposta, setProposta] = useState(false);\n  const [card, setCard] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  console.log(richiesta);\n\n  const getRichiesta = query => {\n    apiGetRichiesta(K.serviceUrl, query)\n      .then(json => {\n        setRichiesta(json);\n      })\n      .catch(e => setCard(true));\n  };\n\n  const accetta = () => {\n    apiAccettaProposta(K.serviceUrl, query)\n      .then(json => {\n        console.log('ok');\n        window.location.href = `/entando-de-app/en/dettaglio.page?guid=${json.guid}`;\n      })\n      .catch(e => console.log('err put'));\n  };\n\n  const rifiuta = id => {\n    apiRifiutaProposta(K.serviceUrl, id)\n      .then(json => {\n        console.log('ok');\n      })\n      .catch(e => console.log('err put'));\n  };\n\n  const query = useQuery().get('id');\n\n  useEffect(() => {\n    getRichiesta(query);\n  }, []);\n\n  function currencyFormatDE(num) {\n    return `${num\n      .toFixed(2) // always two decimal digits\n      .replace('.', ',') // replace decimal point character with ,\n      .replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1.')} €`; // use . as a separator\n  }\n\n  return (\n    <>\n      {card === true && (\n        <div className=\"card text-center\">\n          <div className=\"card-body\">\n            <h5 className=\"card-title\">Errore di sistema</h5>\n            <p className=\"card-text\">Il servizio è termporaneamente non disponibile.</p>\n            <button\n              className=\"btn btn-primary\"\n              onClick={event => (window.location.href = '/entando-de-app')}\n            >\n              Torna alla Home\n            </button>\n          </div>\n        </div>\n      )}\n\n      {card === false && (\n        <>\n          {!richiesta ? (\n            <>\n              <div className=\"spinner\">\n                <div className=\"d-flex flex-column align-items-center justify-content-center\">\n                  <Row>\n                    <Spinner animation=\"grow\" variant=\"primary\" />\n                  </Row>\n                  <Row className=\"row\">\n                    <strong className=\"mt-2\">Elaborazione richiesta ...</strong>\n                  </Row>\n                </div>\n              </div>\n            </>\n          ) : (\n            <>\n              {proposta === false ? (\n                <div className=\"align-items-center back-col p-4\">\n                  <div className=\"white-div align-content-center\">\n                    {richiesta.esito === true ? (\n                      <>\n                        <Row>\n                          <Col md={12} className=\"align-to-center\">\n                            <FontAwesomeIcon\n                              icon={faCheckCircle}\n                              size=\"6x\"\n                              className=\"green-check mb-4\"\n                            />\n                          </Col>\n                        </Row>\n                        <Row>\n                          <Col md={12} className=\"align-to-center\">\n                            <p className=\"title align-content-center\">\n                              La tua azienda è risultata finanziabile.\n                            </p>\n                          </Col>\n                        </Row>\n\n                        <Row>\n                          <Col md={12} className=\"align-to-center\">\n                            <p className=\"subtitle\">\n                              Per completare la pratica leggi ed accetta la nostra proposta\n                              commerciale{' '}\n                            </p>\n                          </Col>\n                        </Row>\n\n                        <Row>\n                          <Col md={12} className=\"align-to-center\">\n                            <button\n                              className=\"custom-button-richiesta\"\n                              onClick={() => setProposta(true)}\n                            >\n                              {' '}\n                              Vai alla proposta\n                            </button>\n                          </Col>\n                        </Row>\n                        <Row>\n                          <Col md={12} className=\"align-to-center\">\n                            <button\n                              className=\"custom-button-richiesta\"\n                              onClick={event => (window.location.href = '/entando-de-app')}\n                            >\n                              {' '}\n                              Ritorna alla home page\n                            </button>\n                          </Col>\n                        </Row>\n                      </>\n                    ) : (\n                      <>\n                        <Row>\n                          <Col md={12} className=\"align-to-center\">\n                            <FontAwesomeIcon\n                              icon={faCircleXmark}\n                              size=\"6x\"\n                              color=\"red\"\n                              className=\"mb-4\"\n                            />\n                          </Col>\n                        </Row>\n                        <Row>\n                          <Col md={12} className=\"align-to-center\">\n                            <p className=\"title align-to-center\">\n                              Siamo spiacenti, al momento non possiamo soddisfare la sua richiesta\n                              di finanziamento\n                            </p>\n                          </Col>\n                        </Row>\n\n                        <Row>\n                          <Col md={12} className=\"align-to-center\">\n                            <button\n                              className=\"custom-button-richiesta\"\n                              onClick={event => (window.location.href = '/entando-de-app')}\n                            >\n                              {' '}\n                              Ritorna alla home page\n                            </button>\n                          </Col>\n                        </Row>\n                      </>\n                    )}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"align-items-center back-col p-4\">\n                  <div className=\"white-div align-content-center\">\n                    <Modal show={showModal} onHide={() => setShowModal(false)}>\n                      <Modal.Header closeButton>\n                        <Modal.Title>Non Accettare</Modal.Title>\n                      </Modal.Header>\n\n                      <Modal.Body>\n                        <p>Sei sicuro di non volere accettare la nostra proposta?</p>\n                      </Modal.Body>\n\n                      <Modal.Footer>\n                        <Button variant=\"secondary\" onClick={() => setShowModal(false)}>\n                          No\n                        </Button>\n                        <Button\n                          variant=\"primary\"\n                          onClick={() => {\n                            rifiuta(richiesta.id);\n                            setShowModal(false);\n                          }}\n                        >\n                          Si\n                        </Button>\n                      </Modal.Footer>\n                    </Modal>\n\n                    <Row>\n                      <Col md={12} className=\"align-to-center\">\n                        <p className=\"title align-content-center\">\n                          La Prefattibilità della tua richiesta ha dato esito positivo\n                        </p>\n                      </Col>\n                    </Row>\n\n                    <Row>\n                      <Col md={12} className=\"align-to-center\">\n                        <p className=\"subtitle\">\n                          Possiamo avviare il nostro processo di delibera per la seguente operazione{' '}\n                        </p>\n                      </Col>\n                    </Row>\n\n                    <Row>\n                      <Col md={12} className=\"align-to-center\">\n                        <span className=\"subtitle-proposta\">Importo: </span>{' '}\n                        <span className=\"subtitle\">\n                          {richiesta.importo ? currencyFormatDE(richiesta.importo) : ''}\n                        </span>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col md={12} className=\"align-to-center\">\n                        <span className=\"subtitle-proposta\">Durata: </span>{' '}\n                        <span className=\"subtitle\">{richiesta.durata}</span>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col md={12} className=\"align-to-center\">\n                        <span className=\"subtitle-proposta\">Tasso variabile: </span>{' '}\n                        <span className=\"subtitle\">\n                          {' '}\n                          euribor mese + spread {richiesta.tassoVariabile}%\n                        </span>\n                      </Col>\n                    </Row>\n                    <Row>\n                      <Col md={12} className=\"align-to-center\">\n                        <span className=\"subtitle-proposta\">Spese Istruttoria: </span>{' '}\n                        <span className=\"subtitle\">2% del finanziamento</span>\n                      </Col>\n                    </Row>\n\n                    <Row>\n                      <Col md={12} className=\"align-to-center\">\n                        <button\n                          className=\"custom-button-richiesta mx-2\"\n                          onClick={() => setShowModal(true)}\n                        >\n                          Non accettare\n                        </button>\n                        <button className=\"custom-button-richiesta mx-2\" onClick={() => accetta()}>\n                          Accetta\n                        </button>\n                      </Col>\n                    </Row>\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </>\n      )}\n    </>\n  );\n};\n","import './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport React, { Component } from 'react';\nimport { Esito } from './components/esito/Esito';\n\nfunction App() {\n  // const { keycloak, initialized } = useKeycloak()\n  // if (keycloak.authenticated) {\n  //   initApplicationConstants();\n  //   checkNewUser();\n  // }\n\n  return <Esito />;\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { initServiceUrl } from './Constants';\n\nconst ATTRIBUTES = {\n  serviceUrl: 'service-url',\n};\n\nclass WidgetElement extends HTMLElement {\n  static get observedAttributes() {\n    return Object.values(ATTRIBUTES);\n  }\n\n  connectedCallback() {\n    const serviceUrl = this.getAttribute('service-url');\n    initServiceUrl(serviceUrl);\n\n    this.mountPoint = document.createElement('div');\n    this.appendChild(this.mountPoint);\n\n    ReactDOM.render(<App serviceUrl={serviceUrl} />, this.mountPoint);\n  }\n}\n\ncustomElements.define('details-widget', WidgetElement);\n\nexport default WidgetElement;\n"],"sourceRoot":""}